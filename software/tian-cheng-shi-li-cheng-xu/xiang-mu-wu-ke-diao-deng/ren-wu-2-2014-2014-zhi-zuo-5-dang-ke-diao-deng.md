### 任务2——制作5档可调灯

#### 1、任务目标

通过按钮调节单色灯的亮度，从单色灯熄灭，按下按钮，灯被点亮，再次按下按钮，单色灯更亮一点，第五次按下按钮后，单色灯最亮，第六次按下按钮，灯熄灭。

#### 2、流程图

![img](/assets/image257.jpg)

图3.5-7

#### 3、程序编程

![img](/assets/image259.jpg)

图3.5-8

程序中“brightness 赋值为”一句里，对变量进行了运算操作:(brightness+1)%6。这里的“%”是一个运算符号，叫做“取余”，这个式子的结果是 brightness+1 后的数 除以 6 得到的余数。

#### 4、硬件连接

硬件连接：LED ——10；按钮——2。注意插线时的颜色对应。

![img](/assets/image261.jpg)

图3.5-9

#### 5、Q&A

Q：单色灯的亮度分为五档，但是却对6取余，而不是5，为什么？

A：取余的右方应写6，因为还有0挡，也就是灯完全熄灭的时刻。

#### 6、拓展

1、知识点总结

1）按钮的按下与松开，分别代表输出的电平高与低。

2）模拟输出的范围为0-255；

3）变量赋值使用时，需先声明，且声明放入“初始化”程序块。

2、相关案例

1）任务1--简易呼吸灯；

2）任务3--制作旋钮可调灯；