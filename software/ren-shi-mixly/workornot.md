## 项目一 HELLO WORLD

### 任务 1——点亮真实 LED 灯

#### 1、任务目标

通过编写程序，控制一盏单色灯点亮1S后熄灭。

#### 2、流程图

编写程序的思路如图3.1-1所示：

![img](/assets/image192.jpg)

图3.1-1

#### 3、程序编写

![img](/assets/image194.jpg)

图3.1-2

#### 4、硬件连接

如图3.1-3所示，将 LED 灯与 10 号管脚相连。注意插线时的颜色对应。

注意：下文如无特殊说明，数字如“10”代表数字接口D10管脚，“3”代表D3。



|      |                              |
| ---- | ---------------------------- |
|      | ![img](/assets/image196.jpg) |



图 3.1-3

#### 5、Q&A

Q：单色灯是如何接线的？

A：首先检查接线是否正确，注意，单色灯的IN与甜橙板的蓝色接口相连，VCC与甜橙板红色管脚相连，GND与甜橙板黑色管脚相连。

Q：如何上传程序？

A：程序编写完成后，点击“基本功能区”的“上传”按钮，观察“信息显示区”，当观察到“上传成功！”字样时，程序上传完成。

#### 6、拓展

1、知识点总结

1）单色灯接线

2）数字输出程序块

3）延时程序块

2、相关案例：

1）闪烁灯（任务2）

2）S.O.S.求救信号（任务1）

### 任务2——让LED越闪越快

#### 1、任务目标

通过编写程序控制一盏单色LED灯使其越闪越快，第一次点亮后灯保持1S然后熄灭100ms，第二次点亮后保持900ms,然后熄灭，以此类推，第十次点亮100ms，熄灭100ms，然后开始点亮1S后熄灭，重复执行。

#### 2、流程图



循环的次数通过变量 i 的大小来控制。所谓变量，就是在程序运行过程中大小发生变化的 量。循环执行过程中，变量 i 从 1000 开始，每次减小100，直到减小到 100，然后循环 结束。每次循环，都会执行一次包在其中的程序(这里就是控制灯亮灭的程序)。  

![img](/assets/image198.jpg)



图3.1-4

 

#### 3、程序编程

首先来看这样一段程序，如图3.1-5所示:

![img](/assets/image200.jpg)

图3.1-5

![img](/assets/image202.jpg)

图3.1-6

 

不难看出，图3.1-6这段程序是由图3.1-5所示的一小段不断重复而成的:

按照之前讲过的顺序执行原则，这一组模块就会一直重复下去。如果我们想让它执行很多次(比如 100 次)，一种办法就是，把 100 个这样的模块组前后连接在一起。

可想而知，如图3.1-7所示，编写的程序会非常长。并且，如果想知道它被重复执行了多少次，数起来也非常麻烦。那么，有没有一种模块，可以自动实现这个重复的过程，并且让人不怎么费力就知道重复执行了多少次呢?

![屏幕快照 2018-07-03 18.24.27.png](/assets/image204.gif)

图3.1-7

上面图3.1-7这段程序，实现了“重复”这个想法。它就是程序中常用的**循环结构**。如何理解这个循环结构呢?“使用 i 从 1000 到 100 步长为-100”这句话是什么意思呢?

循环的次数通过变量 i 的大小来控制。所谓变量，就是在程序运行过程中大小发生变化的量。循环执行过程中，变量 i 从 1000 开始，每次减小 100，直到减小到 100，然后循环 结束。每次循环，都会执行一次包在其中的程序(这里就是控制灯亮灭的程序)。

#### 4、硬件连接

![img](/assets/image206.jpg)

图3.1-8

写好程序后，单击上传按钮，将程序上传到甜橙主控板上，参考图 3.1-8。

 

注意：在上传程序之前，要设置好主控板型号和 COM 接口号，点击“上传”按钮右侧的下拉菜单即可设置。

#### 5、Q&A

Q：程序上传成功后，单色灯常亮，没有闪烁？

A1：检查程序，循环结构的步长是否为-100；

A2：检查程序，对否有单色灯熄灭和延时的程序块。

A3：检查硬件连接，线色的对应。

#### 6、拓展

1、知识点总结

1）顺序结构；

2）循环结构；

3）单色灯的接线：注意线色对应。

2、相关案例：

1）点亮真实的LED灯（任务1）；

## 项目二 S.O.S.

S.O.S.可以被展开为:

Save Our Souls (拯救我们的灵魂)

Save Our Ship (拯救我们的船)

Send Our Succour (速来援助)

Saving Of Soul (救命)

这是全球通用的求救信号。当你身在异乡，突遇险情，SOS 求救信号或许可以救你一命。

### 任务 1——用 LED 发出求救信号

#### 1、任务内容

实现功能：通过程序控制一盏单色灯点亮的时间，分别控制灯点亮的时间间隔为“三短三长三短”时，表示求救信号成功发出。

#### 2、流程图

![img](/assets/image208.jpg)

图 3.2-1





#### 3、程序编程

观察摩尔斯电码 S.O.S 的表示形式(“...---...”)，其中长短依次重复出现，可以采用上一任务中的循环结构:



|      |                              |
| ---- | ---------------------------- |
|      | ![img](/assets/image210.jpg) |





图 3.2-2

#### 4、硬件连接

将 LED 灯与 10 号管脚相连。注意插线时的颜色对应。



|      |                              |
| ---- | ---------------------------- |
|      | ![img](/assets/image212.jpg) |





图 3.2-3

#### 5、Q&A

Q：单色灯出现点亮两短三长四短等不符合的规律，怎么办？

A：此时，应明确，硬件接线、板型和端口号均无误；反复检查所写的程序，延时程序块的位置（循环里面还是外面）和时间值。

#### 6、拓展

1、知识点总结

1）单色灯的接线，注意线色对应。

2）程序结构的设计，循环结构，注意循环体执行的次数和条件。

2、相关案例

1）项目一任务2---让LED灯越闪越快。

## 项目三 神奇的按钮

按钮是我们在这套元件中接触的第一个输入设备，具有按下（高）和抬起（低）两种状

态。默认状态为抬起。生活中的按钮可以说无处不在，遥控器、计算器、手机、电脑等各种电子设备上的按键，都是按钮。

当按钮被按下时，向 2 号管脚输入低电平，此时 10 号管脚应输出高电平;

当按钮被抬起时，向 2 号管脚输入高电平，此时 10 号管脚应输出低电平。

程序如下图所示：

![img](/assets/image214.jpg)

图3.3-1

数字输入:有两种状态，即“高”和“低”。按钮按下为高，抬起为低。支持数字输入的管脚为:2~13， A0~A5(其实 0 号和 1 号管脚也支持数字输入，但因为程序上传过程中需占用0和1管脚，故一般情况下不建议使用)。

### 任务1——简易延时灯

#### 1、任务内容

实现功能：通过按下按钮开关后，单色LED灯被点亮保持3 秒后灯熄灭。

#### 2、流程图

![img](/assets/image216.jpg)

图3.3-2

#### 3、程序编写

![屏幕快照 2018-07-04 10.06.55.png](/assets/image218.gif)

图3.3-3

这里我们看到了一个新的结构——**条件结构**。它是如何应用的呢?请看下图:

![img](/assets/image220.jpg)

图3.3-4

如果当前状态符合判断条件的要求，判断模块内(红色边框内的)的程序将会被执行。如果不符合，则那部分代码将会被跳过，直接执行接下来黑色框中的程序。

#### 4、硬件连接

按钮开关----2；单色 LED 灯---10；注意插线时的颜色对应。

#### 5、Q&A

Q：程序上传成功后，按下按键单色灯不熄灭？

A：观察熄灭灯的程序块的位置，应在条件结构外面。

Q：按键开关可以连接任意的管脚吗？

A：是的，但是，如果设计连接管脚为D0或D1时，需注意：先上传程序后，再连接硬件。

#### 6、拓展

1、知识点总结

1）按钮的工作原理为：按下按键，电路接通，此时按钮输出为低电平。如图3.3-5所示两程序完全相同：按下开关，单色灯被点亮；松开按键开关，灯熄灭。

![img](/assets/image222.jpg)

图3.3-5

2）按钮开关具有机械抖动的缺点，在使用代码编程时，需添加防抖动的程序。

3）条件结构，注意判断的条件与可执行语句的区别

4）数字输入程序块

2、相关案例

1）使用按钮模拟开关（任务2、任务3）；

### 任务2——使用按钮模拟开关(1)

#### 1、任务目标

实现功能：通过控制按钮开关来改变单色灯的状态，每次按下按钮，LED灯由熄灭变为点亮或者由点亮变为熄灭。

#### 2、流程图

![img](/assets/image224.jpg)

图3.3-6

#### 3、程序编程



这段程序中，我们使用了“初始化”模块。相比于它下面的程序，初始化模块在整个程序 运行过程中只执行一次。在初始化模块中，我们使用了定义变量的模块。变量的名称是 state，它是一个布尔变量，即它的值有“高”和“低”两种。以后我们还会见到在初始化 没模块中添加其他模块的例子。  

![img](/assets/image226.jpg)



图3.3-7

 

#### 4、硬件连接

硬件连接：按钮开关----2；单色LED灯----10；注意插线时的颜色对应。

#### 5、Q&A

Q：按下开关，灯并没有切换亮灭？此时已确定：程序上传成功、接线没有错误。

A：检查声明的变量类型是否为布尔变量，也就是检查程序有没有错误。

#### 拓展

1、知识点总结

1）按钮的原理：（按下：输出低电平；抬起：输出高电平）；

2）初始化程序块中程序仅执行一次；

3）布尔变量与按钮开关在改变单色灯的状态时的配合使用；

2、相关案例：本项目的任务3与任务1；

### 任务3——使用按钮模拟开关(2)

#### 1、任务目标

实现功能：通过控制按钮开关来控制单色灯的状态，当按下按钮时，单色LED灯被点亮，保持3 秒后灯熄灭。

#### 2、流程图

![img](/assets/image228.jpg)

图3.3-8

#### 3、程序编程

![img](/assets/image230.jpg)

图3.3-9

这段程序中，我们使用了一个新的模块——**中断**。

**中断**过程是指，在程序顺序执行的过程中，当主控板收到规定的某些数字输入信号时，会立即暂停当前执行的程序，转而去执行中断部分的程序，当中断部分执行完毕，再回到刚 才暂停的地方继续执行原来的程序。注意:主控板上只有 2 号和 3 号管脚支持中断功能。

举一个简单的例子：比如你在家看电视，突然门铃响了（家人回来了），那么你

不得不停下看电视先去开门，之后你又可以继续看电视啦！在整个过程中接电

话就是一个中断过程，门铃响就是中断的标志，即触发中断的条件。

上面的程序中，当人按下按钮时，便会暂停当前程序进入中断，执行中断中的模块。

![img](/assets/image232.jpg)

图3.3-10

#### 4、硬件连接

硬件连接：按钮开关----2；单色LED灯----10；注意插线时的颜色对应。

#### 5、Q&A

Q：为什么数字输入同时也可以是输出？

A：图3.3-8所示，数字输入只是表示电平的高低。

#### 6、拓展

1、知识点总结

1）复位按钮，按下后，程序恢复刚上传成功的状态；

2）中断程序块；

3）延时程序块；

2、相关案例：

1）项目三的任务1和任务2；

## 项目四：简易入侵检测仪

### 任务1——简单入侵检测仪

#### 1、任务目标

当有人走近红外开关的检测范围时，灯被点亮，人走远一定距离后熄灭灯。

#### 2、流程图

![img](/assets/image234.jpg)

图3.4-1

#### 3、程序编程

![img](/assets/image236.jpg)

图3.4-2

#### 4、硬件连接

硬件连接：红外入侵检测仪——3；LED ——10。注意红外接近开关的插线：棕对红，蓝对黑，黑对黄。

![img](/assets/image238.jpg)

图3.4-3

#### 5、Q&A

Q：人靠近红外接近开关没有使灯点亮？

A：将红外开关正对障碍物。

#### 6、拓展

1、知识点总结

1）红外接近开关是一种数字输入设备。具有未入侵(高)和入侵(低)两种状态。默认状态为未入侵(高)。

红外接近开关:红外线属于一种电磁射线。可见光波长是 380nm-780nm，红外线波长为 780nm-1mm，而红外接近开关使用的是接近可见光波长的近红外线。

利用被检测物体对红外光束的遮光(位于红外发射器另一侧的接收器接收不到红外线)或反射(位于 红外发射器同侧的接收器接收到物体反射回来的红 外线)，检测物体的有无。

红外接近开关对所有能反射光线的物体均可检测。

2）使用数字输入管脚，读取输入口数值 1/0 代表有无接收红外信号。

3）条件结构；

2、相关案例：任务2。

### 任务2——记录入侵

#### 1、任务目标

红外接近开关控制点亮灯，按钮控制熄灭灯。当障碍物走进红外开关的检测范围时，灯被点亮，通过按下按钮熄灭灯。

#### 2、流程图

![img](/assets/image240.jpg)

图3.4-4

#### 3、程序编程

![img](/assets/image242.jpg)

图3.4-5

#### 4、硬件连接

硬件连接：红外入侵检测仪——3；LED ——10；按钮——2。注意红外接近开关的插线：棕对红，蓝对黑，黑对黄。

![img](/assets/image244.jpg)

图3.4-6

#### 5、Q&A

Q：红外开关检测到物体后，灯没有点亮？

A：检查线色的对应情况，按下复位按钮，重新检测；

Q：按下按钮开关后，灯没有熄灭？

A：将中断程序块放在初始化模块中，检查STATE的变量类型。

#### 6、拓展

1、知识点总结

1）红外开关的原理；

2）按钮开关；

3）布尔变量的转换机制；

2、相关案例

1）项目四的任务1；

## 项目五：可调灯

灯光在微电脑控制之下完成由暗到亮再由亮到暗的逐渐变化，感觉像是在呼吸，所以称为**呼吸灯**。呼吸灯广泛应用于手机、无线路由器之上，如你的手机里面有未处理的通知，比 如说未接来电，未查收的短信等等，呼吸灯就会由暗到亮的变化，像呼吸一样那么有节奏，起到一个通知提醒的作用。

### 任务1——简易呼吸灯

#### 1、任务目标

在程序的控制下，灯的亮度首先逐渐变亮，达到最亮后，逐渐变暗，完全熄灭后，再次逐渐点亮，依次循环。

#### 2、流程图

![img](/assets/image246.jpg)

图3.5-1

#### 3、程序编程

![img](/assets/image248.jpg)

图3.5-2

不难看出，上面这个函数的功能是让 LED 灯逐渐变亮。 要实现任务要求，还需要一个让 LED 逐渐变暗的函数。 完整的程序如下图：

![img](/assets/image250.jpg)

图3.5-3

这段程序中我们接触到了两个新的模块——**函数以及模拟输出。**

左侧两个紫色块内的程序需要自行编写，它们的功能是定义两个函数。程序的主体是右侧的两个模块，它们是对左侧的函数的调用。

#### 4、硬件连接

硬件连接：LED ——10。注意插线时的颜色对应。

![img](/assets/image252.jpg)

图3.5-4

#### 5、Q&A

Q：灯逐渐点亮后，并没有逐渐熄灭？

A：检查fadeOff函数的步长为-5，而不是5。

#### 6、拓展

1、知识点总结

1）函数：我们最初见到函数是在数学当中。y=f(x)是函数的一种一般形式，它接受变量 x 的值，经过对应法则 f 的处理，向人返回结果值 y。Mixly 程序中的函数，可以类比理解。程序中的 fadeOn 函数接受了变量 time 的值，对其进行了操作，并向程序的其余部分返回一个值。

有区别的是，这里的变量 time，我们称之为“参数”，函数返回的值，是“空值”，因为这个函数的目的，不在于返回一个数值，而在于对于硬件进行输出操作。另外，函数的内部，也可以定义变量（如图3.5-3中的 value），这个变量只在函数执行的时候存在，一旦函数执行结束，value 也就不存在了。函数的一次执行叫做函数的调用，在一个函数中，可以调用其他函数，甚至可以调用自己。

2）模拟输出：脉宽调制（PWM：Pulse Width Modulation）输出：它是一种对模拟信号电平进行数字编码的方法，简单来说就是通过一个时钟周期内高低电平的不同占空比来表征模拟信号，如图3.5-6所示就是一个具体的编码样例。

Arduino 使用 analogWrite(int value)输出 PWM 信号，其中的value 取值范围是 0-255，效果如图3.5-5所示。Arduino 主控板只有有限个GPIO 管脚支持 PWM。观察一下 Arduino 板，查看数字引脚，你会发现其中 6 个引脚（3、5、6、9、10、11）旁标有“~”，这些引脚不同于其他引脚，因为它们可以输出 PWM 信号。

![img](/assets/image254.jpg)

图3.5-5

![img](/assets/image255.jpg)

图3.5-6

### 任务2——制作5档可调灯

#### 1、任务目标

通过按钮调节单色灯的亮度，从单色灯熄灭，按下按钮，灯被点亮，再次按下按钮，单色灯更亮一点，第五次按下按钮后，单色灯最亮，第六次按下按钮，灯熄灭。

#### 2、流程图

![img](/assets/image257.jpg)

图3.5-7

#### 3、程序编程

![img](/assets/image259.jpg)

图3.5-8

程序中“brightness 赋值为”一句里，对变量进行了运算操作:(brightness+1)%6。这里的“%”是一个运算符号，叫做“取余”，这个式子的结果是 brightness+1 后的数 除以 6 得到的余数。

#### 4、硬件连接

硬件连接：LED ——10；按钮——2。注意插线时的颜色对应。

![img](/assets/image261.jpg)

图3.5-9

#### 5、Q&A

Q：单色灯的亮度分为五档，但是却对6取余，而不是5，为什么？

A：取余的右方应写6，因为还有0挡，也就是灯完全熄灭的时刻。

#### 6、拓展

1、知识点总结

1）按钮的按下与松开，分别代表输出的电平高与低。

2）模拟输出的范围为0-255；

3）变量赋值使用时，需先声明，且声明放入“初始化”程序块。

2、相关案例

1）任务1--简易呼吸灯；

2）任务3--制作旋钮可调灯；

### 任务3——制作旋钮可调灯

这里，我们用到了一个新的元件——模拟角度电位器，也叫 “滑动变阻器”。通过调节旋钮，可以改变它接入电路的阻值大小。将其连到主控板支持模拟输入的接口上，就可以把阻值作为模拟信号输入到主控板上。主控板根据输入值的大小，确定输出的值(在这里，输入值大，输出值也大;也可能另外一些程序希望输出值随着输入值变大而减小。)

#### 1、任务目标

按下按钮开关，灯被点亮，此时可以使用旋钮调节LED灯的亮度强弱，当单色灯点亮时再次按下按钮，灯熄灭。

#### 2、流程图

![img](/assets/image263.jpg)

图3.5-10

#### 3、程序编程

需要注意的是，主控板支持的模拟输入信号的大小范围是 0~1023。然而，模拟输出大小是 0~255。因此，模拟输入的数值，不能直接进行模拟输出，我们需要一种办法，能够把 0~1023 内的数，按比例缩小，转化成 0~255 之间的数，再模拟输出。方法如下:

![img](/assets/image265.gif)

图3.5-11

![img](/assets/image267.jpg)

图3.5-12

#### 4、硬件连接

硬件连接：LED ——10；模拟角度电位器——A0；按钮——2。注意插线时的颜色对应。

![img](/assets/image269.jpg)

图3.5-13

#### 5、Q&A

Q：旋钮从最小阻值到最大阻值，经历了四次亮灭，为什么？

A：查看程序是否使用的“映射”程序块，而不是“约束”程序块，其次查看映射的取值范围，模拟输入的范围为0-1023，输出的范围为0-255。

#### 6、拓展

1、知识点总结

1）旋钮的原理，与滑动变阻器类似；

2）“映射”程序块，表达一种输出的对应关系；

3）中断，切换state变量的状态，同时切换灯的状态；

4）条件结构；

2、相关案例

1）本项目任务1；

2）本项目任务2；

## 项目六：智能灯

智能灯是以控制、灯光效果、创作、分享、光与音乐互动、光提升健康和幸福为特点的新型智能设备。开关灯的控制，不但可以通过控制器，手动遥控灯的开关，还可以进行声控开关灯的控制。

我们需要通过声音代替按钮形式的开关。如何识别声音信号呢?我们需要使用 一个新的原件——模拟声音传感器。

模拟声音传感器可以将声音的响度转化成模拟信号。在 Arduino 主控板上， 仍然是输入 0~1023 的数值。

### 任务1——声控灯

#### 1、任务目标

用串口打印出通过模拟声音传感器采集的环境中的声音值，当有响声且大于某设定值时，灯被点亮并且持续一段时间，当检测到声音的数值小于某设定值时，灯熄灭。

#### 2、流程图

![img](/assets/image271.jpg)

图3.6-1

#### 3、程序编程

1）我们看到，程序中使用了一个新的模块——**串口打印**

![img](/assets/image273.jpg)

图3.6-2

2）模拟输入的信号是通过串口传给 Arduino 主控板的，使用“串口打印”可以把当前通过串口的数据显示出来。显示在串口监视器里。

![img](/assets/image275.jpg)

图3.6-3

3）单击串口监视器，会弹出一个新窗口，这个窗口中显示上传的数据:

![img](/assets/image277.jpg)

图3.6-4

 

#### 4、硬件连接

硬件连接：LED ——10；模拟声音传感器——A0。注意插线时的颜色对应。

 

![img](/assets/image279.jpg)

图3.6-5

#### 5、Q&A

Q：程序上传完成后，打开串口，没有检测到数据输出？

A：检查串口号是否为当前使用的端口，检查的方法为：点击端口的下拉按钮，是否有多个端口，如果是，拔掉甜橙版，重新插入，会重新出现的端口号为目标端口号。

#### 6、拓展

1、知识点总结

1）串口打印

2）模拟传感器

3）逻辑比较

4）条件结构

2、相关案例

1）本项目任务2；

2）本项目任务3；

### 任务2——制作楼道灯

#### 1、任务目标

程序首先通过模拟声音传感器和模拟光线传感器分别打印出检测到的声音值和光强值，然后根据这两个值作为条件进行判断，当声音值大于某设定值并且同时光强值小于某设定值时，点亮单色LED灯，并且保持3S，当没有同时满足这两个条件时，熄灭单色LED灯。

#### 2、流程图

![img](/assets/image281.jpg)

图3.6-6

#### 3、程序编程

![img](/assets/image283.jpg)

图3.6-7

#### 4、硬件连接

硬件连接：LED ——10；模拟声音传感器——A0；模拟光线传感器——A1。注意插线时的颜色对应。

![img](/assets/image285.jpg)

图3.6-8

#### 5、Q&A

Q：“如果”程序块的条件怎么编写的？

A：首先，明确条件由两部分组成，分别是光强和声音，这两部分必须同时满足，故逻辑关系为“且”，声音和光强的每部分内部都是“逻辑比较”的关系，故编写的顺序为：从基本模块区--逻辑 中拖出“逻辑选择”程序块，再拖出“逻辑比较程序块”，再从基本模块区--输入/输出 中拖出“模拟输入”程序块，再从基本模块区--数学 中拖出“数值”，修改“数值”的值为500，组成如图3.6-6所示的程序块；“逻辑选择”程序块的右侧的编写与左侧同理。

![img](/assets/image287.jpg)

图3.6-9

#### 6、拓展

1、知识点

1）“逻辑选择”与“逻辑比较”的嵌套使用；

2）串口打印；

3）条件结构；

2、相关案例

1）本项目任务1；

### 任务3——制作电子蜡烛

#### 1、任务目标

   首先打开Mixly的串口监视器，可以分别看到模拟声音传感器和模拟光线传感器检测到的声音强度值和光强值；当亮度暗时，蜡烛“点亮”，火苗闪烁，有吹蜡烛的声音的时候，蜡烛熄灭。

#### 2、流程图

![img](/assets/image289.jpg)

图3.6-10

#### 3、程序编程

![img](/assets/image291.jpg)

图3.6-11

#### 4、硬件连接

硬件连接：LED ——10；模拟声音传感器——A0；模拟光线传感器——A1。注意插线时的颜色对应。

![img](/assets/image292.jpg)

图3.6-12

#### 5、Q&A

Q：为什么程序中要设定光强大于1000时，在限定声音值小于500时，蜡烛开始闪烁？

A：光强大于1000的时刻，代表点蜡烛的瞬间，光线最强。

#### 6、拓展

1、知识点总结

1）“随机数”程序块；

2）串口打印；

3）循环结构；

2、相关案例

1）本项目任务2和任务1；

## 项目七：创意门铃

说到门铃，都会想起自家门铃“叮咚”的响声。制作一个门铃，需要一个能够发出声音的电子原件——蜂鸣器。

蜂鸣器可以依照设定的频率发出不同音高的声音。日常生活中 蜂鸣器的应用非常广泛，比如刷公交卡时滴滴的提示音、警车、救护车等发出的警报声。

这个项目中，我们也要做门铃。与普通门铃不同的是，这个门铃可以按照你的想法来工作，比如门铃可以播放一段音乐，或者只有当门外的人连按两次时，门内的人才会被告知。你还可以再添加一些新奇的想法，快来试试吧!

### 任务1——让蜂鸣器发声

#### 1、任务目标

通过编写程序控制蜂鸣器播放指定音乐。

 

#### 2、流程图

![img](/assets/image294.jpg)

图3.7-1

#### 3、程序编程

![img](/assets/image296.jpg)

图3.7-2

注意：播放完声音后加上蜂鸣器关的程序。

#### 4、硬件连接

硬件连接： 蜂鸣器——8。注意插线时的颜色对应。

![img](/assets/image298.jpg)

图3.7-3

#### 5、Q&A

Q：为什么关闭蜂鸣器后需要加上“延时”程序块？

A：整个程序是循环执行的，如果不加延时，会造成，音乐几乎不停顿播放。

#### 6、拓展

1、知识点总结

1）顺序结构

2）“蜂鸣器开”与“蜂鸣器关”的配合使用；

2、相关案例

1）本项目任务2；

2）项目八的任务1；

### 任务2——制作简易门铃

#### 1、任务目标

​    按下按钮开关，蜂鸣器开始播放两段频率不同的音乐，播放完毕后停止。

#### 2、流程图

![img](/assets/image300.jpg)

图3.7-4

#### 3、程序编程

![img](/assets/image302.jpg)

图3.7-5

#### 4、硬件连接

硬件连接： 按钮——2；蜂鸣器——8。注意插线时的颜色对应。

![img](/assets/image304.jpg)

图3.7-6

 

#### 5、Q&A

Q：按钮按下没有使音乐播放停止？

A：此程序中，按钮开关的作用，只能播放音乐，而不能使音乐声停止。

#### 6、拓展

1、知识点总结

1）自定义函数；

2）条件结构

3）“蜂鸣器开”与“蜂鸣器关”的配合使用；

2、相关案例

1）本项目任务1；

## 项目八：小小作曲家

本节中，我们将向你介绍一种用Mixly播放音乐的方法。这一节中，你能够了解到一 些有关音乐的基本知识，以及它们如何与 Arduino 和Mixly 结合，并试着自己编一段小旋律。

### 任务1——简单音阶

#### 1、任务目标

这段程序实现了一个简单的功能:蜂鸣器能按顺序播放一组音阶(do, re, mi, fa, sol, la, si)。程序 的开头定义了一个含有 7 个元素的数组，每一个元素对应着一个音的频率。

 

#### 2、流程图

![img](/assets/image306.jpg)

图3.8-1

#### 3、程序编程

![img](/assets/image308.jpg)

图3.8-2

#### 4、硬件连接

硬件连接： 蜂鸣器——8。注意插线时的颜色对应。

![img](/assets/image310.jpg)

图3.8-3

#### 5、Q&A

Q：蜂鸣器播完一组音阶后，没有停顿，重复开始执行？

A：没有加入“蜂鸣器关”程序块。

#### 6、拓展

1、知识点总结

1）“蜂鸣器开”与“蜂鸣器关”的配合使用；

2）顺序结构；

2、相关案例

1）项目七的任务1；

2）本项目的任务2；

### 任务2——简单乐曲

#### 1、任务目标

用蜂鸣器播放简单乐曲。

#### 2、流程图

![img](/assets/image312.jpg)

图3.8-4

#### 3、程序编程

![img](/assets/image314.jpg)

图3.8-5

#### 4、硬件连接

硬件连接： 蜂鸣器——8。注意插线时的颜色对应。

![img](/assets/image316.jpg)

图3.8-6

#### 5、Q&A

Q：程序上传成功后，蜂鸣器不响？

A：检查连线，蜂鸣器的IN与甜橙板D8管脚相连，注意线色对应。

#### 6、拓展

1、知识点总结

1）关于音乐的基本知识

一般来讲，一个音有以下要素：音高、音色、响度。在乐曲中，时值也是一个重要的要素。

声音与物体的震动：声音是由物体的震动产生的。

音高与频率：一个音的音高，由物体振动的频率决定。振动频率指物体振动的快慢，频率越高，物体振动越快，音高越高。

音色与材质：不同的物体的材质不同，振动时产生的声音的“色彩”不相同。

响度与振幅：一个音色响度，由物体振动的幅度决定。物体振动幅度越大，响度越大。

音名：前面已经知道，音调的高低是由频率决定的。对于音乐来说，人们已经发现，用一些特定的频率的音，演奏出来的曲子比较悦耳。人们也将这些频率用英文字母代替，方便记忆。这个英文字母，就是它代表的那个音的音名。（例如，规定 A=440Hz，那么，A 就是一个音名）音名是唯一的，任何情况下，一个音名只能代表同一个频率。（如 A 永远代表 440Hz）。

唱名：音乐课上，你肯定听到过 do re mi fa sol la si 吧？这些就是唱名。因为唱出来比较简单。”do ”可以对应不同的频率，可以是440Hz，也可以是 880Hz，也可以是……。所以可以看出音名和唱名的区别——一个音名值对应一个频率，一个唱名可以对应多个频率。

时值：指一个音的长短。

2）“蜂鸣器开”与“蜂鸣器关”的配合使用；

2、相关案例

1）项目七的任务1；

2）项目把的任务1；

 

## 项目九：噪音计

生活中我们可以看到一些仪器上指针——时钟、电压表、电流表、汽车上的转速表......甜橙 套件中也有一个元件可以模拟指针，它就是**舵机**。

舵机是由直流电机、减速齿轮组、传感器和控制电路组成的一套自动控制系统通过发送信号，指定输出轴旋转角度套件中舵机最大旋转角度:180°。

这是 Mixly 软件中控制舵机的程序块:

![img](/assets/image318.jpg)

图3.9-1

### 任务1——制作一个噪音计

#### 1、任务目标

根据模拟声音传感器检测到的噪音的大小，控制舵机转动到不同的角度。

#### 2、流程图

![img](/assets/image320.jpg)

图3.9-2

#### 3、程序编程

![img](/assets/image322.jpg)

图3.9-3

#### 4、硬件连接

硬件连接： 舵机——9；模拟声音传感器——A0。注意插线时的颜色对应。

![img](/assets/image324.jpg)

图3.9-4

#### 5、Q&A

Q：无论怎么调节噪声，舵机都没有转动到180度位置？

A：查看程序中是否正确使用了“约束”程序块，二看延时的时间，是否太小，因为舵机的转动需要一定时间。

#### 6、拓展

1、知识点总结

1）“舵机”程序块；

2）“映射”与“模拟输入”程序块的结合；

2、相关案例

1）本项目任务2；

### 任务2——探测最大噪音

#### 1、任务目标

模拟声音传感器用来探测一段时间内噪音的最大值，用户按下按钮开关后模拟声音传感器开始工作， 只记录最大值。再次按下按钮开关停止记录，并回到初始位置。

#### 2、流程图

思路解析：

![img](/assets/image326.jpg)

图3.9-5

如何使按键随时改变工作状态——**中断函数。**

在这个程序中，我们主要需要用一个 state变量来判断工作状态，若 state 值为1(即开) 各部分按要求工作，若 state值为0(即关)则所有部分归零;其次，在工作过程中我们还 需随时检测按键有没有被按下以改变state的值;噪音计和舵机的工作状态与按键状态是 两个可以独立运行的部分(没有什么明显的逻辑关系语句可以把两个部分建立联系)，因此，我们考虑用中断函数，即在工作或停止工作过程中随时检测按键状态(在用按键控制复杂的元件的开关状态时经常使用中断函数)。

#### 3、程序编程

![img](/assets/image328.jpg)

图3.9-6

#### 4、硬件连接

硬件连接： 舵机——9；按钮——2；模拟声音传感器——A0。注意插线时的颜色对应。

![img](/assets/image330.jpg)

图3.9-7

#### 5、Q&A

Q：按下按钮开关后，舵机没有开始摆动或摆动角度很小？

A：模拟传感器的输入值较小，此时可以修改映射的输出范围；

#### 6、拓展

1、知识点总结

1）“舵机”程序块与“映射”、“模拟输入”程序块的结合使用；

2）条件结构；

3）变量的使用；

2、相关案例

1）本项目的任务1；

2）项目五的任务2；

 

## 项目十：遥控灯

想象自己躺在床上，该睡觉了，灯的开关却在几米外的门口，你不愿离开温暖的被窝，在寒冷中跋涉漫长的几米去关灯。你需要一个遥控器。现实世界的大多数遥控器都是发出红外的信号，如电视机遥控器，机顶盒遥控器等。

任何一个遥控系统都由发射器和接收器两部分组成。

每个按钮都有一个特定的 16 进制代码，都以 FD 开头，在接收过程中有可能出错。

![img](/assets/image332.jpg)

图3.10-1

### 任务1——制作一个红外遥控灯

#### 1、任务目标

通过红外遥控器发出红外信号控制灯的状态，当按下一个开关键，灯由点亮变为熄灭，再次按下，由熄灭变为点亮。

#### 2、流程图

![img](/assets/image334.jpg)

图3.10-2

#### 3、程序编程

![img](/assets/image336.jpg)

图3.10-3

#### 4、硬件连接

硬件连接：LED——10；红外遥控模块——12（主板自带）。注意插线时的颜色对应。

![img](/assets/image337.jpg)

图3.10-4

 

#### 5、Q&A

Q：是怎样接收遥控器发出的红外信号的？

A：甜橙板上自带红外接收传感器模块，并且默认与D12管脚相连。

#### 6、拓展

1、知识点总结

1）“红外接收”程序块；

2）条件结构；

2、相关案例

## 项目十一：另类电子琴

电子琴想必大家都见过，但是，你是否玩过我们即将介绍的另类电子琴呢?这个电子琴里有一个重要的元件——**超声波测距仪**。

下面这段程序，能够将测到的距离存储到一个变量里。

![img](/assets/image339.jpg)

图3.11-1

### 任务1——制作另类电子琴

#### 1、任务目标

首先在可以在串口监视器查看超声波测量的距离值，又根据超声波测量的距离值的变化，控制蜂鸣器发出不同的音节。

#### 2、流程图

![img](/assets/image341.jpg)

图3.11-2

#### 3、程序编程

![img](/assets/image343.jpg)

图3.11-3

#### 4、硬件连接

硬件连接：蜂鸣器——8；超声波——（见表格）。注意插线时的颜色对应。

![img](/assets/image345.jpg)

 

图3.11-4

 

| 超声波 | 甜橙板              |
| ------ | ------------------- |
| VCC    | 5V（任意红色针脚）  |
| Trig   | 数字口2（蓝色针脚） |
| Echo   | 数字口3（蓝色针脚） |
| GND    | GND（任意黑色针脚） |

 

#### 5、Q&A

Q：在串口监视器中只能观察到一个超声波的距离值？

A：可能的原因是将变量的赋值放在“初始化”中，只执行了一次，将赋值程序块放在初始化之外，蜂鸣器执行的前面，即可。

#### 6、拓展

1、知识点总结

1）数组的创建和赋值；

2）数组的取值；

3）变量的使用；

2、相关案例

1）项目十二的任务1；

## 项目十二：超声波测距仪

在上一个电子琴任务中，我们通过距离的变化，控制琴的音高。相应地，我们也能通过音高的变化，大致感受手与元件 的距离。不过，我们能不能直接看到距离是多少呢?怎样把测得的数字显示出来呢?这就需要一个液晶显示屏了。

液晶显示模块:每行16个字符，共2行若出现乱码，可在每次输出之前清屏。

![屏幕快照 2018-07-06 06.40.35.png](/assets/image347.gif)

图3.12-1

### 任务一：超声波模块测量距离

#### 1、任务目标

将超声波传感器检测到的距离显示在LCD1602液晶显示屏上。

#### 2、流程图

![img](/assets/image349.jpg)

图3.12-2

#### 3、程序编程

![img](/assets/image351.jpg)

图3.12-3

请你观察上面的程序是否能正确输出?如果不能，想一想应如何修改。

![img](/assets/image353.jpg)

图3.12-4

#### 4、硬件连接

硬件连接：超声波——表1；液晶显示模块——表2。注意插线时的颜色对应。

![img](/assets/image355.jpg)

图3.12-5

表1

| 超声波 | 甜橙板  |
| ------ | ------- |
| VCC    | 5V      |
| Trig   | 数字口2 |
| Echo   | 数字口3 |
| GND    | 地      |

表2

| LCD1602显示屏 | 甜橙板   |
| ------------- | -------- |
| SDA           | 模拟口A4 |
| SCL           | 模拟口A5 |
| VCC           | 5V       |
| GND           | GND      |

 

#### 5、Q&A

Q：显示屏上没有示数或者示数不变？

A：没有将超声波测量的值赋给变量，首先需要声明变量，赋值变量在初始化程序块外面。

#### 6、拓展

1、知识点总结

1）“初始化”程序块中的程序仅执行一次；

2）LCD1602液晶显示屏的“清屏”程序块；

3）LCD1602液晶显示屏的打印；

4）变量的使用；

2、相关案例

1）项目十一的任务1；

## 项目十三：蓝牙通信

蓝牙：是一种无线技术标准，可实现固定设备、移动设备和楼宇个人域网之间的短距离数据交换（使用2.4—2.485GHz的ISM波段的UHF无线电波）。

首先设置AT模式，参考硬件说明书第四章，4.6蓝牙模块。

### 任务1—-蓝牙与PC的数据传输

#### 1、任务目标

HC-05蓝牙模块通过甜橙版与PC实现通信，可以通过串口调试助手观察结果。

#### 2、流程图

![img](/assets/image357.jpg)

图3.13-1

#### 3、程序编程

![img](/assets/image359.jpg)

图3.13-2

也可以用代码编程使用Arduino IDE来编程，代码如下：

\#include <SoftwareSerial.h>

volatile char s;

SoftwareSerial mySerial(10,11);

void setup(){

  s = 0;

  Serial.begin(9600);

  mySerial.begin(9600);

}

 

void loop(){

  if (mySerial.available() > 0) {

​    s = mySerial.read();

​    Serial.print(s);

  }

}

#### 4、硬件连接

###### 1）甜橙与蓝牙的接线

蓝牙TX--甜橙D10；蓝牙RX---甜橙D11；蓝牙GND接甜橙黑色管脚；蓝牙VCC接甜橙红色管脚。

###### 2）打开电脑蓝牙

首先打开电脑的 设置，如图3.13-3所示，点击设备--打开蓝牙，单击添加蓝牙或其他设备，如图3.13-4所示：

![img](/assets/image361.jpg)

图3.13-3

![img](/assets/image363.jpg)

图3.13-4

###### 3）将PC蓝牙与蓝牙模块进行配对连接

A、点击“蓝牙”，如图3.13-5所示，进入添加设备页面，点击QC-HC05，进行配对连接，如图3.13-6所示，当出现如图3.13-7所示时，PC已经与蓝牙模块连接完成；

B、点击图3.13-4所示的“更多蓝牙选项”，单击“COM端口”如图3.13-8所示，观察传出端口，图中为COM8。

![img](/assets/image365.jpg)

图3.13-5

![img](/assets/image367.jpg)

图3.13-6

![img](/assets/image369.jpg)

图3.13-7

![img](/assets/image371.jpg)

图3.13-8

#### 5、Q&A

Q：如何确定蓝牙进入AT模式？怎么退出AT模式？

A：蓝牙模块指示灯由2次/秒快速闪烁进入2秒/次的频率闪烁，表明蓝牙已进入AT模式。

设置完毕后，断开电源，再次通电，这时，蓝牙模块指示灯会快速闪烁，这表明蓝牙已经进入正常工作模式，两个模块会自动配对然后连接，状态灯会出现慢闪烁指示。

Q：蓝牙配对完成后，并没有收到发送的信号？

A：检查硬件接线，RX、TX是否已经交叉连接；查看蓝牙模块的工作状态，指示灯是否慢闪烁。

#### 6、拓展

1、知识点总结

1）蓝牙模块的接线；

2）蓝牙AT模式的设置；

3）蓝牙与PC的配对与连接；

## 项目十四：节日闪烁彩灯

### 任务1——WS2812 全彩 LED 灯

#### 1、任务目标

将三个全彩LED灯颜色设置依次是红黄绿。

#### 2、流程图

![img](/assets/image373.jpg)

图3.14-1

#### 3、程序编程

![img](/assets/image374.jpg)

图3.14-2

![img](/assets/image375.jpg)

图3.14-3

 

![img](/assets/image376.jpg)

图3.14-4

![img](/assets/image378.jpg)

图3.14-5

#### 4、硬件连接

硬件连接：IN端控制灯颜色，OUT端连接下一个全彩LED灯；D3连接1号彩灯的IN控制端。

注：观察单个全彩灯模块，有电容的一角为IN，也可以看灯壳，缺角的一侧为IN端，另一端为OUT。

![493907773784909381](/assets/image380.jpg)

图3.14-6

#### 5、Q&A

Q：程序上传成功后，灯不亮？

A：查看甜橙版是否连接的是全彩灯的IN端，第二个全彩灯的IN端。

#### 6、拓展

1、知识点总结

1）全彩灯的接线，控制端为IN，OUT端与下一个全彩灯的IN连接；

2）全彩灯的控制，灯号没有重复；

3）全彩灯阵的控制，可以通过单个的全彩灯来控制；

全彩灯阵的控制，IN端在左端时，左上角第一个灯为1号灯，其右方为2号灯，第二行第一个为5号灯。

2、相关案例

 

## 项目十五：制作一个温湿度仪

### 任务一：制作一个温度仪

#### 1、任务目标

在串口打印出温湿度传感器测出的温度值和湿度值。

#### 2、流程图

![img](/assets/image382.jpg)

图3.15-1

#### 3、程序编程

1）打开 Mixly,在左侧模块栏选择 传感器 →DHT11，如图 3.15-2 所示，示例中温湿度传感器数据输出引脚连接到主控板的 D8 端口，因此在程序中将管脚号改为 8，如图 3.15-3。

![img](/assets/image384.jpg)

图3.15-2

![img](/assets/image386.jpg)

图 3.15--3

2）在模块栏中分别选择 串口 →Serial 波特率以及 Serial 打印（自动换行），如图 3.15-4 所示。

![img](/assets/image388.jpg)

图 3.15-4

3）从模块栏中分别选择声明变量、文本框和延时模块，按照图 3.15-5所示连接。

![img](/assets/image390.jpg)

图 3.15-5

4）上传程序到主控板，打开串口监视器，当改变环境温度时（可将温湿度传感器放到手心或者靠近装热水的水杯），可以从串口监视器中观察到温度逐步上升，如图 3.15-6 所示。

![img](/assets/image392.jpg)

图 3.15-6

5）当需要同时读取温度和湿度值时，可以参考如图 3.15-7 所示的程序，变量的声明和使用以及文本框的调用可参照本章节温度传感器在Mixly 中使用示例的步骤。当环境温湿度改变时，可通过串口监视器观察到 DHT11 返回的温湿度变化，如图 3.15-8 所示。

![img](/assets/image394.jpg)

图 3.15-7

![img](/assets/image396.jpg)

图 3.15-8

6）在 Mixly 示例程序文件中打开“温湿度传感器 DHT11”示例文件，将此示例上传到主控板后，可从串口监视器中观察到温湿度传感器返回的数据，改变环境温湿度，可观察到串口打印的温湿度数据也逐渐随之改变。

#### 4、硬件连接

硬件连接：DH11---8。

#### 5、Q&A

Q：靠近热源后，串口打印的温度值没有变化？

A：最好声明一个变量，用来存储检测到的温度值。

#### 6、拓展

1、知识点总结

1）“DHT11温湿度传感器”程序块的使用；

2）温湿度传感器的接线；

3）变量的使用，先声明，在赋值使用；

2、相关案例

温湿度传感器DHT11与温度传感器DS18B20的使用方法的异同。

 

## 项目十六：减速电机

### 任务一：实现电机的正反转

#### 1、任务目标

​    通过外接电源供电，程序控制实现HR8833减速电机正转和反转。

#### 2、流程图

![img](/assets/image398.jpg)

图3.16-1

#### 3、程序编程

![img](/assets/image400.jpg)

图3.16-2

程序模块中的 left 和right 分别对应主控板上的 M1 和 M2 两个接线端子连接的电机，速度范围为-255-255，负值越小为电机反转速度越快，正值越大为电机正转速度越快，速度 0 为电机停止。

![img](/assets/image402.jpg)

图3.16-3

#### 4、硬件连接

硬件连接：红色线---D4；黑色线---D5。

外接电源：DC接口连接外接的9V电源，并将甜橙板的电源从“off”拨到“on”。

#### 5、Q&A

Q：程序上传成功后，电机并没有开始转动；

A：检查外接电源的开关是否拨到“ON”,甜橙板外接电源处是否拨到“ON”端。

#### 6、拓展

1、知识点总结

1）HR8833的接线；

2）“电机初始化”程序块；

3）left电机对应M1的接口，Right电机对应M2两个接口；

4）外接电源供电；

2、相关案例

电机需要**外接电源**供电，用六节5号电池，DC接口；在程序上传成功后，外接电源盒，打开电池盒和甜橙版的电源开关，电机开始转动。

# 第4章 注意事项

甜橙主控板各部分如下图4-1：

![img](/assets/image404.jpg)

图4-1

甜橙 2.0 主控板是以 ATMEGA328P 为核心的单片机开发板，与 Arduino UNO 兼容的控制器模块，该主控板支持Arduino IDE 编程和 Mixly 图形化编程。

主控板上有 18 个数字输入/输出端口（D0~D3，D8~D13，A0~A7），8 个模拟输入端口（ A0~A7 ）。D4、D5、D6、D7 为电机控制端口，D3、D9、D10、D11 可输出 PWM 信号，A4、A5 是 I2C 端口的 SDA 和 SCL 引脚，D12、D13 分别为主控板上自带红外接收器和 LED 灯的控制端口，D0、D1 为串口复用引脚，一般不使用这两个端口连接传感器或执行器。

甜橙 2.0 主控板在不挂载电机和舵机的情况下可直接使用 USB 供电，如果使用 2 个以内的 9g 舵机(小型舵机)，也可以使用 USB 供电；如果使用 MG995 舵机等大电流舵机则建议使用外接电源。外接电源由 DC 口接入，可使用 6 节 5 号电池盒、2S（7.4V）或 3S（11.1V）锂电池供电。

注：

(1) 在编程设计和硬件连接时不能随意占用 D0、D1 引脚，否则会导致程序上传失败，主控板不能正常使用。

(2)主控板的端口有负极（G）、正极（V）、信号（D 或 A）之分，传感器的引脚也有负极（GND）、正极（VCC）、信号之分，连接硬件时，需要注意主控板端口与传感器引脚的正（V）负（G）极一 一对应，如果连接错误就会烧坏主控板或者传感器。

## 1、硬件连接

1）接口：数字接口蓝色为信号线对应信号输入的管脚，模拟接口黄色为信号输入的管   脚；无论数字还是模拟接口，所有红色管脚为VCC，电压高低均为5V，所有黑色管脚为GND端，也表示电压的负极，这表示所有的红色管脚是通用的，同理，所有的黑色管脚也是通用的。         

2）直流电机接口：管脚为数字接口的D4、D5、D6、D7；接线方式稍有不同，使用一字螺丝刀将电机线压入上下两片小孔中。

3）模拟输入：A6、A7只能用作模拟输入。

4）模拟输出：D3、D9、D10、D11。

5）电源接口：通常HR8833电机必须使用DC口外接电源供电，可以通过电源接口连接9V的电池盒；其他功率较大的设备也可以使用外接电源供电。使用时，要将甜橙版的电源开关拨到“ON”，使用完成后，将电源开关拨到“OFF”。

6）复位开关的使用：每次按下复位键，按下会使Arduino重新启动，从头开始运行程序。

7）红外接收头：默认与D12管脚相连。

8）板载L13：默认与D13相连。

9）甜橙的主控板只有管脚2和3支持中断功能；

10）0/1管脚为硬件串口，可以用来进行串口通信，并且在上传程序时不得被占用；

## 2、版型选择

版型为Arduino/Genuino Uno；如图所示：

![img](/assets/image405.jpg)

图4-2

 

## 3、COM口选择

自动识别，（拔出重插，新出现的COM口）；如上图4-3所示：

![img](/assets/image406.jpg)

图4-3

 

## 4、编译失败

1）软件程序块不兼容，如将青橙模块区的OLED 屏幕程序块用于甜橙模块的控制。

2）端口分配冲突或没有分配端口：有些元器件在使用时系统不会分配端口比如HR8833减速电机、RGB灯、LCD1602液晶显示屏。

3）如果板型没有选错，查看程序区是否有多余的程序块，我们上传程序需要将无关的程序块删除；

 

4）管脚使用错误：D0、D1被占用。

## 5、上传失败

编译成功，但是最终上传失败，信息显示区如图4-4所示：

1）板子损坏：管脚接触不良、USB下载口接触不良，元器件损坏。

2）程序无法编译：可关闭软件再重新打开Mixly，编写上传。

4）版型必须选择Arduino/Genuino Uno；

5）上传程序前，程序编辑区是否有多余程序块；要将多余的程序块删除；

6）甜橙版用电设备是否太多，造成端口自动断开，可外接电源。

![abrdude](/assets/image408.jpg)

图4-4

 

## 6、程序编写

1）模拟量作输入时应接在模拟接口（A0-A7），如旋钮开关、摇杆模块、光敏、声音、火焰、烟雾、土壤湿 度、水位等传感器；

2）模拟输出时，应接在D3、D9、D10、D11上，D5、D6为电机接口；

模拟输入值的范围为0-1023，模拟输出值的范围为0-255；

3）模拟输出“1”与数字输出“1”有区别：灯作模拟输出时，若值为1，那么此时灯几乎不亮，因为此时模拟输出的值等于255时，才与数字输出的“1”亮度相同，数字输出的“1”还可以用“高”表示。

4）红外通信时，用十六进制数时，要加前缀0X；

5）模拟端口A0-A5也可以用作数字输入与输出，A6、A7只能作模拟输入用，不能用作数字输入与输出。