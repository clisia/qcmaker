### 2.2.1数字输入简介

数字输入：输入数字信号，即0/1的二进制数字信号；

1、打开 Mixly 编译环境，在 Mixly 左侧模块栏中选择 输入/输出 →数字输入，如图 2.2-2。

![img](/assets/image074.jpg)

图 2.2-2

2、修改数字输入管脚，根据主控板接入传感器的引脚选择正确的管脚号，如图2.2-3 所示修改为D2管脚。

![img](/assets/image076.jpg)

图 2.2-3

### 2.2.2数字输出简介

数字输出：输出的信号为0/1两个状态的信号；

在 Mixly 左侧模块栏中选择 输入/输出 →数字输出，如图 2.2-4；然后将管脚号改为 13，如图 2.2-5 所示。

![img](/assets/image078.jpg)

图 2.2-4

![img](/assets/image080.jpg)

图 2.2-5

### 2.2.3模拟输入简介

模拟输入：指输入模拟信号（模拟量）；

1、打开 Mixly 编译环境，在 Mixly 左侧模块栏中选择 输入/输出 →模拟输入，如图 2.2-6。

![img](/assets/image082.jpg)

图2.2-6

2、修改模拟输入管脚，根据主控板接入传感器的引脚选择正确的管脚号，如图2.2-7 所示修改为A0管脚。

![img](/assets/image084.jpg)

图2.2-7

注意：模拟输入管脚为A0-A7。

### 2.2.4模拟输出简介

模拟输出：输出的信号为模拟信号。

1、在 Mixly 的左侧模块栏中选择 输入/输出 →模拟输出，如图 2.2-8所示：

![img](/assets/image086.jpg)

图2.2-8

2、修改模拟输出管脚，根据主控板接入传感器的引脚选择正确的管脚号，如图2.2-9所示：

![img](/assets/image088.jpg)

图2.2-9

 

注意：模拟输出管脚在甜橙版上为3/5/6/9/10/11，赋值范围为0-255。

### 2.2.5中断函数简介

中断过程是指，在程序顺序执行的过程中，当主控板收到规定的某些数字输入信号时，会立即暂停当前执行的程序，转而去执行中断部分的程序，当中断部分执行完毕，再回到刚才暂停的地方继续执行原来的程序。

![img](/assets/image090.jpg)

图2.2-10

注意：1、甜橙主控板上只有 2 号和 3 号管脚支持外部中断功能。

2、中断模式有三种，分别是：上升沿、下降沿、电平改变。

## 2.3控制模块介绍

本节主要讲程序的主要控制部分，包括程序的初始化、延时、条件结构、循环结构等。

什么是控制？从一般意义上说，控制是指控制主体按照给定的条件和目标，对控制客体施加影响的过程和行为。管理的过程就是控制的过程。因此，控制既是管理的一项重要职能，又贯穿于管理的全过程。例如：人的大脑发出抬起左脚的命令，左脚执行。

对应的MIxly模块，如图 2.3-1所示：

![img](/assets/image092.jpg)

图2.3-1

### 2.3.1初始化程序块简介

包括端口的状态、变量的声明、彩灯准备、电机准备、LCD162初始化等内容均属于初始化内容，内部的程序仅执行一次。

![img](/assets/image094.jpg)

图2.3-2

### 2.3.2延时程序块简介

延时程序即让芯片反复的做无用的空指令，以拖延时间，

可以让程序暂停执行一定时间以后再执行下一步程序（延时的常用单位是毫秒）。

注：1秒=10^3毫秒=10^6微秒。

![img](/assets/image096.jpg)

图2.3-3

### 2.3.3“如果”程序块简介

![img](/assets/image098.jpg)

图2.3-4

若条件成立，将内部程序执行一次，然后执行下一步程序；

若条件不成立，跳过内部程序，执行下一步程序。

![img](/assets/image100.jpg)

图2.3-5

 

“如果”语句分支结构，可以是单分支，也可以是多分支结构。

在“如果”模块中，点击蓝色的设置图标，选择“否则”，将它拖到“内部程序”处，即可得到“如果否则”程序块。

当如果程序块需要判断多个条件时，就会用到“否则如果”标签，这个标签可以有无限个，程序进入程序块后，按从上到下的顺序判断各个标签的条件，如果条件符合，则执行该标签内部程序，如果条件不符合则判断下一个标签的条件，如果所有条件都不符合，则执行“否则”标签内部的程序，只要成功执行了任何一个内部程序，则跳出程序块。

### 2.3.4 switch语句简介

![img](/assets/image102.jpg)

图2.3-6

Switch语句是多分支结构，与“如果”模块类似，switch语句常与case一起使用，default表示不满足条件时，执行语句体，default常用于switch语句的最后一层判断；相当于“如果”程序块的“否则”。

### 2.3.5 for语句简介

![img](/assets/image104.jpg)

图2.3-7

循环的次数通过变量 i 的大小来控制。所谓变量，就是在程序运行过程中大小发生变化的量。循环执行过程中，变量 i 从 1 开始，每次增加1，直到等于10，然后循环结束，执行下一步程序。每次循环，都会执行一次循环体的内部程序。

### 2.3.6重复执行简介

![img](/assets/image106.jpg)

图2.3-8

重复执行，当满足某一条件时，执行内部程序。

## 2.4流程图表示程序

流程图以特定的图形符号加上说明，表示思路的图，称为流程图或**框图**。流程图有时也称作输入-输出图，该图直观地描述一个工作过程的具体步骤。基本结构包括顺序结构、分支结构和循环结构。

### 2.4.1基本流程图简介

| 序号 | 名称       | 图片                         | 用途                                              |
| ---- | ---------- | ---------------------------- | ------------------------------------------------- |
| 1    | 开始或结束 | ![img](/assets/image107.jpg) | 表示流程图的开始或结束                            |
| 2    | 流程       | ![img](/assets/image109.jpg) | 执行或处理                                        |
| 3    | 判定       | ![img](/assets/image110.jpg) | 对某一条件进行判断真假                            |
| 4    | 数据       | ![img](/assets/image111.jpg) | 表示数据的输入或结果的输出                        |
| 5    | 数据流     | ![img](/assets/image113.jpg) | 箭头指向流程图执行的方向                          |
| 6    | 连接符号   | ![img](/assets/image115.jpg) | 用于连接到另一页；避免流程图交叉； 避免流程图太长 |

### 2.4.2顺序结构简介



如下图2.4-2程序执行顺序为：从上到下，假如管脚10与单色LED灯相连，那么灯亮1S然后熄灭，程序结束。 

功能描述：按照时间先后，依次执行语句A，语句B；是最为常见的一种结构；  

![img](/assets/image117.jpg)



图2.4-1

![img](/assets/image119.jpg)

图2.4-2

### 2.4.3分支结构简介

#### 1）单分支结构



程序执行至某一处时，出现分支，需要判断真假，如果条件成立，则为真，执行语句A，然后接着向下执行程序；如果不成立，则为假，执行语句B，随后程序向下执行。 

![img](/assets/image121.jpg)



图2.4-3

![img](/assets/image123.jpg)

图2.4-4

如图2.4-4所示，假设管脚6与触摸传感器相连，管脚8与单色LED灯相连，此程序执行顺序为：

如果触摸传感器被按下，条件成立，执行点亮LED灯动作并且LED灯保持点亮状态；如果松开触摸传感器，执行熄灭LED灯，且保持熄灭状态。

#### 2）多分支结构

![img](/assets/image125.jpg)

图2.4-5

 

功能描述：

如果表达式的值为真，则执行语句1，然后退出if选择语句不执行下面的语句；否则，判断表达式2，如果表达式2的结果为真，则执行语句2，然后退出if选择语句，不执行下面的语句，同样，如果表达式的值为假则判断表达式3，以此类推，最后如果表达式n不成立，则执行else后面的语句。

注：一个判断框有两个出口，而分支结构只有一个出口，切记不要混为一谈。



如右图4-7所示，为多分支结构，假设管脚2、3、A4、A5均与按钮开关相连，管脚8/9/10、11均与单色LED灯相连，那么此程序执行顺序为：如果2号管脚相连的按钮按下，8号管脚相连的LED灯点亮；如果3号管脚相连的按钮按下，那么与9号管脚相连的LED灯点亮；如果A4号管脚相连的按钮按下，那么与10号管脚相连的LED灯点亮；如果A5号管脚相连的按钮按下，那么与11号管脚相连的LED灯点亮；如果没有按钮按下，那么所有的LED灯都熄灭。 

![img](/assets/image127.jpg)



图2.4-6

 

### 2.4.4循环结构简介

#### 1）“重复执行”程序块

 

![img](/assets/image129.jpg)

图2.4-7

假设管脚2相连的设备为按钮开关，13号管脚接的是单色LED灯，此程序的执行顺序为：

如果按钮按下，点亮LED灯，接着判断按钮的状态，如果还是按住状态，还是执行点亮LED灯....只有当按钮状态为松开时，熄灭LED灯。

#### 2）For语句循环

 



执行步骤：首先求解表达式1，第二步判断表达式2，如果表达式2为真，执行语句，然后求解表达式3，再来判断表达式2，如果表达式2为假，跳出循环，执行程序余下的语句。 

![img](/assets/image131.jpg)



图2.4-8

![img](/assets/image133.jpg)

图2.4-9

如上图2.4-9，假设管脚3连接单色灯，灯光由弱变强，每次变化灯光效果持续一秒，当灯光达到最亮后，持续一秒跳出循环，执行下一步程序。

### 2.4.5三种结构共同特点

1）结构内每一部分都有机会被执行到；

2）结构内不存在无法跳出的循环；

3）只有一个入口，也只有一个出口。

## 2.5串口通信介绍

甜橙的D0、D1为arduino自带的串口称为硬件串口，D0为RX，为接收信号的端口；D1为TX，为发送信号的端口。在进行串口通信时，两个串口设备间需要发送端（TX）与接收端（RX）交叉相连，并共用电源地（GND），而使用SoftwareSerial类库模拟成的串口称为软件模拟串口（简称软串口）。

![img](/assets/image135.jpg)

图2.5-1

### 2.5.1“打印（自动换行）”程序块简介

打印程序块可以把打印内容通过USB线发送到电脑，并在Mixly的“串口监视器”中查看，自动换行功能顾名思义就是发送完一条消息，换下一行打印。

![img](/assets/image137.jpg)

图2.5-2

### 2.5.2“软串口初始化”程序块简介

![img](/assets/image139.jpg)

图2.5-3

注意：通常在连接外部设备时尽量避免使用0（RX）、1（TX）这组串口。

### 2.5.5“波特率”程序块简介

![img](/assets/image141.jpg)

图2.5-4

Mixly的串口监视器的默认波特率为9600，可以在波特率的程序块中改写波特率的值，同时，打开串口监视器，如图2.5-5所示，点击波特率的下拉按钮，可以修改波特率为9600的整倍数；同时，可以以另一种模式查看数据，就是绘图模式，通常用于模拟输入值的观察。

![img](/assets/image143.jpg)

图2.5-5

## 2.6数字模块介绍

本节主要讲与数学计算、取值有关的程序块，包括数学计算、位运算、函数运算、取整、随机数、约束、映射。

### 2.6.1“计算”程序块简介

计算程序块主要用于加、减、乘、除、求余数、乘方的计算用途，选择运算符，将A数和B数进行需要的预算即可。

![img](/assets/image145.jpg)

图2.6-1

### 2.6.2“取整”程序块简介

通常该函数被广泛应用于数论，函数绘图和计算机领域，这是对数据的处理，可分为六种方式，分别是：四舍五入、取上限、取下限、取绝对值、平方、平方根。

![img](/assets/image147.jpg)

图2.6-2

### 2.6.3“随机数”程序块简介

随机数程序块，就好像自己做了一颗骰子，骰子最小可以摇摆到设置的下限，最高可以摇摆到设置的上限-1，例如以上程序可以在1-99之间取一个随机数。

![img](/assets/image149.jpg)

图2.6-3

### 2.6.4“约束”程序块简介

“约束”就是将一个数字约束在一定范围之内，如果数字在范围之内，那么直接输出数字，如果数字低于下限，则输出下限值，如果数字高于上限，则输出上限值。

![img](/assets/image151.jpg)

图2.6-4

### 2.6.5“映射”程序块简介

“映射”程序块可以自动将输入的数值按比例换算到输出范围。

![img](/assets/image153.jpg)

图2.6-5

映射的功能：是将前面集合中的元素对应到后面集合中的元素，若是模拟输入传感器，映射模块前面集合中的元素为主控制器从传感器采集到的数据（0～1023），后面集合中的数据设置为0～255，0～255 是模拟输出的限定范围；

### ![文本框: 位运算：二进制数之间的运算 与：&，两边同为真，结果才为真； 或：|，两边任意一边为真，结果为真； 异或：一边为真，一边为假，结果才为真； 左移：<<，每左移一位，数值变为原来的一半； 右移：>>，每右移一位，数值变为原来的两倍； ](/assets/image154.gif)2.6.6“位运算”程序块简介

![img](/assets/image156.jpg)

图2.6-6

### 2.6.7“函数运算”程序块简介



正弦、余弦、正切、反正弦反余弦反正切对数函数底数为e的对数函数、底数为e和10的幂函数自增、自减、按位取反函数 

![img](/assets/image158.jpg)



图2.6-7

## 2.7逻辑模块介绍

逻辑关系：比较、与、或、非、空、条件命题；

![img](/assets/image160.jpg)

图2.7-1

### 2.7.1“比较”程序块简介

可以按照设定规则比较两边数字的大小，比较规则有：大于、小于、等于、大于等于、小于等于、不等于，如果两边数字的大小符合规则，则为真，如果不符合则为假。

![img](/assets/image162.jpg)

图2.7-2

### 2.7.2“逻辑选择”程序块简介

逻辑关系有：“逻辑或”和“逻辑且”。

逻辑且：两边同时为真，则程序块为真（有假则假）；

逻辑或：两边的条件有一边为真，则结果为真（有真则真）；

![img](/assets/image164.jpg)

图2.7-3

### 2.7.3“逻辑非”程序块简介

用于将其连接的条件取反，如果条件成立，取反后条件不成立；如果条件不成立，取反后条件成立。

![img](/assets/image166.jpg)

图2.7-4

## 2.8显示器模块介绍

分为液晶显示屏1602、RGB灯、四位数码管、8*8点阵显示屏的相关初始化、控制程序块。

### 2.8.1 LCD1602显示屏简介

![img](/assets/image168.jpg)

图2.8-1

![img](/assets/image170.jpg)

图2.8-2

LCD1602液晶显示屏的地址是默认的，Mixly中无需修改；

模块的引脚接线为：

SCL：与A5相连；

SDA：与A4相连；

VCC：与电源管脚相连；

GND：与地管脚相连。

### 2.8.2 RGB灯模块简介

![img](/assets/image172.jpg)

图2.8-3

管脚号的设置与上述步骤一致，灯号按照实际需要进行设置，示例中灯号设置为 1，R、G、B 设置数值范围为 0～255。

![img](/assets/image174.jpg)

图2.8-4

设置全彩 LED 灯颜色的程序除图2.8-4 以外，还有另一种方法，在 Mixly 左侧模块栏的显示器选项中选择带有选色器的程序模块，管脚号设置与上述步骤一致，灯号设置为 1，管脚号为0，颜色的选择可打开选色器，如图2.8-5所示。

![img](/assets/image176.jpg)

图2.8-5

## 2.9变量模块介绍

变量均需先声明再使用，且声明部分在程序中只执行一次。

### 2.9.1“变量声明”程序块简介

“变量”就像个记东西的小纸条，变量在使用之前要“声明”，就是告诉大家这张纸条叫什么（与其他变量区分），记录什么类型的东西（比如整数、小数或英文等），纸条上最初写着什么（初始值）。

![img](/assets/image178.jpg)

图2.9-1

### 2.9.2“变量赋值”程序块简介

赋值的意思是赋予它一个数值，比如在纸条上写100，就是一次数值。

![img](/assets/image180.jpg)

图2.9-2

### 2.9.3“变量值类型”程序块简介

变量可以赋值为整数、长整数、小数、布尔、字节、字符、字符串。

![img](/assets/image182.jpg)

图2.9-3

## 2.10函数模块介绍

函数：我们最初见到函数是在数学当中。y=f(x)是函数的一种一般形式，它接受变量 x 的值，经过对应法则 f 的处理，返回结果值 y。Mixly 程序中的函数，可以类比理解。

### 2.10.1“函数准备”程序块简介

函数好像一个程序包，其中包含了一些制定好的程序，在执行函数的时候，其实是执行了函数内部制定好的程序，同样的函数执行多少次结果都一样，例如命令厨师蒸馒头的程序，每次蒸馒头的步骤肯定一样，蒸出的馒头肯定也一个样子。

![img](/assets/image184.jpg)

图2.10-1

### 2.10.2“参数”程序块简介

![img](/assets/image186.jpg)

图2.10-2

如果命令厨师蒸包子，那就需要告诉厨师包子馅是什么（X），其他的程序还是一样的（和面、包包子、蒸熟），这时候单纯的函数就无法胜任了，需要在执行函数的同时，将参数X（包子馅）设定好。

![img](/assets/image188.jpg)

图2.10-3

### 2.10.3“函数执行”程序块简介

“函数执行”程序块在编程界面中就像是普通的程序块，只不过在实际执行的时候执行的是“函数准备”中制定的程序，并且需要设定好参数，参数可以是数字也可以是文本，参数实际上就是变量，只是因为位置特殊，所以叫“参数”。

![img](/assets/image190.jpg)

图2.10-4